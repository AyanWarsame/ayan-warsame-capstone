# Default values for ayan-warsame-app
# This is a YAML-formatted file.

replicaCount:
  frontend: 2
  backend: 2

image:
  frontend:
    repository: 024848484634.dkr.ecr.eu-west-1.amazonaws.com/ayan-warsame/frontend
    pullPolicy: Always
    tag: "latest"
  backend:
    repository: 024848484634.dkr.ecr.eu-west-1.amazonaws.com/ayan-warsame/backend
    pullPolicy: Always
    tag: "latest"

imagePullSecrets:
  - name: ecr-registry-secret

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  frontend:
    create: true
    name: frontend-serviceaccount
  backend:
    create: true
    name: backend-serviceaccount

rbac:
  create: true

podSecurityContext:
  frontend:
    runAsUser: 0
    runAsNonRoot: false
  backend: {}

securityContext: {}

service:
  frontend:
    type: ClusterIP
    port: 80
  backend:
    type: ClusterIP
    port: 5000

ingress:
  frontend:
    enabled: true
    className: "nginx"
    annotations:
      nginx.ingress.kubernetes.io/rewrite-target: /
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
    hosts:
      - host: ayan-warsame.capstone.company.com
        paths:
          - path: /
            pathType: Prefix
    # Allow access via ELB hostname directly
    allowDirectAccess: true

resources:
  frontend:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "100m"
  backend:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

autoscaling:
  backend:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80

networkPolicy:
  enabled: true

database:
  credentials:
    secretName: database-credentials
    # These should be set via --set or sealed secrets
    host: ""
    port: 3306
    database: appointments
    username: ""
    password: ""

livenessProbe:
  frontend:
    httpGet:
      path: /health
      port: 80
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 3
    failureThreshold: 3
  backend:
    httpGet:
      path: /health
      port: 5000
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3

readinessProbe:
  frontend:
    httpGet:
      path: /health
      port: 80
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3
  backend:
    httpGet:
      path: /health
      port: 5000
    initialDelaySeconds: 10
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3

